[gd_scene load_steps=16 format=3 uid="uid://dgym1luoteeoa"]

[ext_resource type="Material" uid="uid://yrehvvcknouu" path="res://assets/material.tres" id="1_kmpvh"]
[ext_resource type="Script" uid="uid://c3offhmltwus5" path="res://scripts/raycast_car.gd" id="2_5xha7"]
[ext_resource type="Script" uid="uid://diog0uae3yfq6" path="res://scripts/raycast_wheel.gd" id="3_equcc"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_spyxv"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_kmpvh"]
sky_material = SubResource("ProceduralSkyMaterial_spyxv")

[sub_resource type="Environment" id="Environment_5xha7"]
background_mode = 2
sky = SubResource("Sky_kmpvh")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="PlaneMesh" id="PlaneMesh_5xha7"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_equcc"]
data = PackedVector3Array(1, 0, 1, -1, 0, 1, 1, 0, -1, -1, 0, 1, -1, 0, -1, 1, 0, -1)

[sub_resource type="BoxMesh" id="BoxMesh_spyxv"]

[sub_resource type="BoxShape3D" id="BoxShape3D_5xha7"]
size = Vector3(1, 1.2471924, 0.86828613)

[sub_resource type="Curve" id="Curve_equcc"]
_data = [Vector2(0, 0.3), 0.0, 0.0, 0, 0, Vector2(0.3, 0.90000004), 0.0, 0.0, 0, 0, Vector2(0.6, 0.8), 0.0, 0.0, 0, 0, Vector2(1, 0.1), 0.0, 0.0, 0, 0]
point_count = 4
metadata/_snap_enabled = true

[sub_resource type="BoxMesh" id="BoxMesh_equcc"]
size = Vector3(2, 0.5, 4)

[sub_resource type="BoxMesh" id="BoxMesh_2lfkc"]
size = Vector3(0.65, 0.4, 1.8)

[sub_resource type="BoxShape3D" id="BoxShape3D_rniql"]
size = Vector3(2, 0.4, 4)

[sub_resource type="CylinderMesh" id="CylinderMesh_5xha7"]
top_radius = 0.4
bottom_radius = 0.4
height = 0.15

[node name="Level1" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_5xha7")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.9999619, -0.0054443073, 0.0068199662, 0, 0.7815205, 0.6238796, -0.008726535, -0.6238558, 0.78149074, 1.394661, 4.3579483, 1.1782451)
shadow_enabled = true

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.6469499, 0.36062053, -0.6718696, 0.13912046, 0.8104937, 0.5689864, 0.74973416, -0.46157652, 0.47417915, -8.0040245, 6.9041824, 3.757874)

[node name="Plano" type="MeshInstance3D" parent="."]
transform = Transform3D(500, 0, 0, 0, 500, 0, 0, 0, 500, 0, -0.5, 0)
mesh = SubResource("PlaneMesh_5xha7")

[node name="StaticBody3D" type="StaticBody3D" parent="Plano"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Plano/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_equcc")

[node name="IntentoCubo" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -19.135342, -0.14514828, 2.2381077)

[node name="Cubo" type="MeshInstance3D" parent="IntentoCubo"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.1874251, 2.2174025, -14.000098)
material_override = ExtResource("1_kmpvh")
mesh = SubResource("BoxMesh_spyxv")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="IntentoCubo"]
transform = Transform3D(-0.5330916, 0.18722247, 0.82508254, 0.38508236, -0.81464803, 0.43365914, 0.7533425, 0.5489047, 0.36218593, -11.002417, -0.5441258, -28.373436)
shape = SubResource("BoxShape3D_5xha7")

[node name="Car" type="RigidBody3D" parent="." node_paths=PackedStringArray("wheels")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.3972344, 0)
mass = 50.0
script = ExtResource("2_5xha7")
wheels = [NodePath("WheelFL"), NodePath("WheelRL"), NodePath("WheelFR"), NodePath("WheelRR")]
max_speed = 60.0
accel_curve = SubResource("Curve_equcc")

[node name="CarMesh" type="MeshInstance3D" parent="Car"]
material_override = ExtResource("1_kmpvh")
mesh = SubResource("BoxMesh_equcc")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Car/CarMesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.10994494, 0.43921113, 1.0747871)
material_override = ExtResource("1_kmpvh")
mesh = SubResource("BoxMesh_2lfkc")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Car"]
shape = SubResource("BoxShape3D_rniql")

[node name="WheelFL" type="RayCast3D" parent="Car"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.1, 0, -1.3)
enabled = false
script = ExtResource("3_equcc")
spring_strength = 5000.0
spring_damping = 120.0

[node name="Wheel" type="MeshInstance3D" parent="Car/WheelFL"]
transform = Transform3D(-4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0, 0, 1, 0, -0.1, 0)
mesh = SubResource("CylinderMesh_5xha7")

[node name="WheelRL" type="RayCast3D" parent="Car"]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -1.1, 0, 1.3)
enabled = false
script = ExtResource("3_equcc")
spring_strength = 5000.0
spring_damping = 120.0
wheel_radius = 0.75
is_motor = true

[node name="Wheel" type="MeshInstance3D" parent="Car/WheelRL"]
transform = Transform3D(-4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0, 0, 1, 0, -0.1, 0)
mesh = SubResource("CylinderMesh_5xha7")

[node name="WheelFR" type="RayCast3D" parent="Car"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.1, 0, -1.3)
enabled = false
script = ExtResource("3_equcc")
spring_strength = 5000.0
spring_damping = 120.0

[node name="Wheel" type="MeshInstance3D" parent="Car/WheelFR"]
transform = Transform3D(-4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0, 0, 1, 0, -0.1, 0)
mesh = SubResource("CylinderMesh_5xha7")

[node name="WheelRR" type="RayCast3D" parent="Car"]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 1.1, 0, 1.3)
enabled = false
script = ExtResource("3_equcc")
spring_strength = 5000.0
spring_damping = 120.0
wheel_radius = 0.75
is_motor = true

[node name="Wheel" type="MeshInstance3D" parent="Car/WheelRR"]
transform = Transform3D(-4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0, 0, 1, 0, -0.1, 0)
mesh = SubResource("CylinderMesh_5xha7")
